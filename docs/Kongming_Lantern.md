# 孔明灯玩法

## 玩法设定

- 托管角色与孔明灯使者NPC对话完成后，自动开启孔明灯玩法
- 进入孔明灯场景后，玩家的孔明灯会从地面位置（33,14）生成，孔明灯上升到云端，镜头跟随上升
- 上升过程中经过大量其它孔明灯，形成一个3D效果，上升到一定高度后停止，旁边也有大量其它孔明灯展示
- 玩家可以通过鼠标/触摸拖拽旋转视角
- 玩家点击任意孔明灯，镜头会移动到该孔明灯位置并跟随其漂浮动画，同时展示其祝福语
- 玩家可以通过点击右上角的退出按钮返回游戏
- 退出孔明灯场景后，在主场景之上显示"点击任意键重启庙会"文字，带闪烁效果
- 点击鼠标、键盘、触摸任意操作都触发游戏重启

## 技术设定

- 孔明灯场景使用 Three.js 3D 场景实现
- 星星使用 THREE.Points 批量渲染，并添加闪烁动画效果
- 海量孔明灯：渲染 2000+ 个背景孔明灯，每个都带有独立的浮动（float）和摇摆（sway）动画参数，模拟自然飘升效果
- 后期处理：使用 UnrealBloomPass 实现辉光效果，增强视觉唯美感
- 摄像机控制：
  - 上升阶段：摄像机自动跟随玩家的孔明灯从地面升至高空
  - 交互阶段：支持鼠标/触摸拖拽旋转视角（isDragging 逻辑）
- 交互：使用 THREE.Raycaster 检测点击，点击孔明灯可弹出随机祝福语

## 素材

- 孔明灯素材在 `assets/kongming/` 文件夹下，随机使用其中的一张图片作为孔明灯的素材
